{"id":"js/Takeover.js","dependencies":[{"name":"/Users/ftinoco/Sites/klic-takeover-maker/.babelrc","includedInParent":true,"mtime":1540394815000},{"name":"/Users/ftinoco/Sites/klic-takeover-maker/package.json","includedInParent":true,"mtime":1540414549000},{"name":"@babel/runtime/helpers/classCallCheck","parent":"/Users/ftinoco/Sites/klic-takeover-maker/src/js/Takeover.js","resolved":"/Users/ftinoco/Sites/klic-takeover-maker/node_modules/@babel/runtime/helpers/classCallCheck.js"},{"name":"seethru","loc":{"line":1,"column":20},"parent":"/Users/ftinoco/Sites/klic-takeover-maker/src/js/Takeover.js","resolved":"/Users/ftinoco/Sites/klic-takeover-maker/node_modules/seethru/src/seeThru.js"},{"name":"./utils","loc":{"line":3,"column":39},"parent":"/Users/ftinoco/Sites/klic-takeover-maker/src/js/Takeover.js","resolved":"/Users/ftinoco/Sites/klic-takeover-maker/src/js/utils.js"},{"name":"./analytics","loc":{"line":4,"column":22},"parent":"/Users/ftinoco/Sites/klic-takeover-maker/src/js/Takeover.js","resolved":"/Users/ftinoco/Sites/klic-takeover-maker/src/js/analytics.js"}],"generated":{"js":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _seethru = _interopRequireDefault(require(\"seethru\"));\n\nvar _utils = require(\"./utils\");\n\nvar _analytics = _interopRequireDefault(require(\"./analytics\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar template = \"<article class=\\\"o-takeover\\\" id=\\\"takeover\\\">\\n  <a href=\\\"#\\\" class=\\\"to-media-remove\\\" id=\\\"takeover-close\\\">\\n    <img src=\\\"{{BASE_URL}}/img-btn-close.png\\\" class=\\\"to-media-img to-media--close\\\" />\\n  </a>\\n  <div class=\\\"o-takeover__wrapper\\\">\\n    <div class=\\\"o-takeover__inner\\\">\\n      <a href=\\\"/pelicula/el-depredador-preventa\\\" target=\\\"_blank\\\" class=\\\"o-takeover__content anima-tk\\\" id=\\\"takeover-content\\\">\\n        <div class=\\\"tk_elements\\\">\\n          <div class=\\\"bs__video\\\" style=\\\"display:none;\\\">\\n            <video id=\\\"bgvideo\\\" crossorigin muted>\\n              <source title=\\\"webm\\\" type=\\\"video/webm\\\" src=\\\"{{BASE_URL}}/media-predator-end.webm\\\" />\\n              <source title=\\\"mp4\\\" type=\\\"video/mp4\\\" src=\\\"{{BASE_URL}}/media-predator-end.mp4\\\" />\\n              <source title=\\\"ogg\\\" type=\\\"video/ogg\\\" src=\\\"{{BASE_URL}}/media-predator-end.ogv\\\" />\\n            </video>\\n          </div>\\n        </div>\\n      </a>\\n    </div>\\n  </div>\\n</article>\";\n\nvar Takeover = // parser markup depend enviroment\nfunction Takeover() {\n  var _this = this;\n\n  (0, _classCallCheck2.default)(this, Takeover);\n  this.isProdEnv = \"development\" === 'production';\n  this.markup = this.isProdEnv ? (0, _utils.parserTemplateBaseUrls)(\"<link rel=\\\"stylesheet\\\" href=\\\"{{BASE_URL}}/main.css\\\">\".concat(template)) : (0, _utils.parserTemplateBaseUrls)(template);\n\n  this.render = function () {\n    $('body').append(_this.markup);\n  };\n\n  this.cache = function () {\n    _this.tk_obj = $('#takeover');\n    _this.tk_content = $('#takeover-content');\n    _this.tk_close = $('#takeover-close');\n    _this.tk_video = $('#bgvideo');\n    _this.tk_videoCanv = $('#bgvideo')[0];\n    _this.tk_mute = $('#takeover-mute');\n    _this.tk_area = $('.wrapper');\n  };\n\n  this.bindEvents = function () {\n    // Here init event listeners\n    _this.tk_close.on('click', function (e) {\n      e.preventDefault();\n      this.closeTakeover();\n    }.bind(_this));\n\n    if (_this.isProdEnv) _this.tk_content.on('click', _analytics.default.clickHit);\n  };\n\n  this.showTakeover = function () {\n    // Here init animations and show takeover\n    _this.tk_obj.delay(2000).fadeIn(600);\n\n    _this.vid();\n  };\n\n  this.vid = function () {\n    var $bgVideo = $('#bgvideo')[0];\n\n    _this.resizeVideos();\n\n    $('.bs__video').fadeIn();\n\n    _seethru.default.create($bgVideo);\n\n    $bgVideo.play();\n\n    _this.tk_area.addClass('to-stamp');\n\n    _this.tk_video.bind('ended', function () {\n      this.closeTakeover();\n    }.bind(_this));\n  };\n\n  this.closeTakeover = function () {\n    _this.tk_obj.fadeOut(600);\n\n    _this.tk_area.removeClass('to-stamp');\n\n    window.clearTimeout(_this.timeout);\n  };\n\n  this.autoClose = function () {\n    _this.timeout = setTimeout(function () {\n      this.closeTakeover();\n    }.bind(_this), 1000 * 11);\n  };\n\n  this.resizeVideos = function () {\n    var vW = 1366;\n    var vH = 648;\n    var wW = $(window).width();\n    var wH = $(window).height();\n    var adjW = wW;\n    var calcH = Math.round(wW * vH / vW);\n    var adjH = wH;\n    var calcW = Math.round(wH * vW / vH);\n    var fW, fH, fL, fT;\n\n    if (calcW > wW) {\n      fW = calcW;\n      fH = adjH;\n      fL = -Math.round((calcW - wW) / 2);\n      fT = 0;\n    } else {\n      fW = adjW;\n      fH = calcH;\n      fL = 0;\n      fT = -Math.round((calcH - wH) / 2);\n    }\n\n    $(\".bs__video\").css({\n      width: fW,\n      height: fH,\n      left: fL,\n      top: fT\n    });\n    $('.seeThru-display').css({\n      width: fW,\n      height: fH,\n      left: fL,\n      top: fT\n    });\n  };\n\n  this.render();\n  this.cache();\n  this.bindEvents();\n  this.showTakeover();\n  if (this.isProdEnv) _analytics.default.viewHit();\n};\n\nexports.default = Takeover;","map":null},"hash":"db1cc41e671962cfa4bec230586e3868","cacheData":{"env":{"NODE_ENV":"development"}}}